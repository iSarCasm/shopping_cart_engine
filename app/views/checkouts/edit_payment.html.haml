.container
  %h2
    Checkout
  %h3.col-md-offset-1.col-md-2
    %a{href: edit_address_checkout_path(@order), class: 'step'} Address
  %h3.col-md-2
    %a{href: edit_delivery_checkout_path(@order), class: 'step'} Shipment
  %h3.col-md-2
    .step{class: 'current'} Payment
  %h3.col-md-2
    .step Confirm
  %h3.col-md-2
    .step Complete
  .row
    =form_for @order, url: {controller: :checkouts, action: :update}  do |order|
      .col-sm-6.col-sm-push-6
        = html_for_errors payment_error_messages_of(flash[:errors], :payment)
      .col-sm-6.col-sm-pull-6
        = order.fields_for :payment do |f|
          .field.form-group
            = f.label :card
            = f.text_field :card, class: 'form-control'
          .row
            .field.form-group.col-xs-4
              = f.label :expiration_year
              = f.select :expiration_year, (Time.now.year..2100).to_a, {}, class: 'form-control'
            .field.form-group.col-xs-4
              = f.label :expiration_month
              = f.select :expiration_month, (1..12).to_a, {}, class: 'form-control'
            .field.form-group.col-xs-4
              = f.label :cvv
              = f.text_field :cvv, class: 'form-control'
      =order.hidden_field :step, value: @current_step
      .actions
        = order.submit 'Save and Continue', class: ['btn', 'btn-default']
